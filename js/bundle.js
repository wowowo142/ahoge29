!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n,a,o,r=800,i=600,l=.375,d=window.innerWidth<=800;d&&(r*=l,i*=l);var c,s,p,u,h,f,x,g,y=3e6,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,3,3],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3];function b(e,t){var a=PIXI.Texture.from(t);return n.set(e,a),a}!function e(){n=new Map;a=new Array;o=null;c=0;s=0;p=2e4;u=1;h=0;x=0;b("background","./res/img/back.jpg");b("type0","./res/img/donu_plain.png");b("type1","./res/img/donu_green.png");b("type2","./res/img/donu_toxic.png");b("type3","./res/img/donu_predator.png");b("hole","./res/img/hole.png");b("dog_close","./res/img/dog_close.png");b("dog_open","./res/img/dog_open.png");b("box","./res/img/box.png");b("label_box","./res/img/label_box.png");b("label_o2","./res/img/label_o2.png");b("startbutton","./res/img/startbutton.png");b("restartbutton","./res/img/restartbutton.png");b("tweetbutton","./res/img/tweetbutton.png");var t=new PIXI.Application({width:r,height:i,backgroundColor:16777215});t.stage.sortableChildren=!0;d&&(t.stage.scale.x=t.stage.scale.y=l);var m=document.getElementById("game");m.innerHTML="";m.appendChild(t.view);PIXI.TextMetrics.BASELINE_SYMBOL+="あ｜";var C=new PIXI.Sprite(n.get("background"));C.alpha=.5;t.stage.addChild(C);var P=new PIXI.Container;P.sortableChildren=!0;P.zIndex=100;P.x=80;P.y=70;t.stage.addChild(P);var M=(new PIXI.Graphics).beginFill(15663103).drawRect(0,0,500,450).endFill();M.alpha=.8;P.addChild(M);var X=new PIXI.Sprite(n.get("hole"));X.anchor.y=.5;X.zIndex=1e4;X.pixHeight=X.texture._frame.height;X.y=50;X.scale.y=0;P.addChild(X);var T=new PIXI.Container;T.y=445;T.zIndex=1e3;t.stage.addChild(T);var F=new PIXI.Sprite(n.get("dog_close"));F.open=!1;T.addChild(F);var S=new PIXI.Text("₫"+ie(p),{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:15});S.x=15;S.y=18;T.addChild(S);var O=new PIXI.Container;t.stage.addChild(O);var _=new PIXI.Text(s+"日経過",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:30});_.x=20;_.y=10;O.addChild(_);var k=new PIXI.Text("目標金額まで : ₫"+ie(y-c),{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:20});k.anchor.x=1;k.x=780;k.y=15;O.addChild(k);var z=new PIXI.Container;z.x=750;z.y=170;t.stage.addChild(z);var L=new PIXI.Sprite(n.get("label_o2"));L.y-=80;z.addChild(L);var A=(new PIXI.Graphics).beginFill(11184810).drawRect(0,0,30,410).endFill();A.pivot.x=.5;var W=(new PIXI.Graphics).beginFill(4521796).drawRect(0,0,20,400).endFill();W.pivot.x=.5;W.x=5;W.y=5;var j=(new PIXI.Graphics).beginFill(4473924).drawRect(0,0,20,400).endFill();j.pivot.x=.5;j.x=5;j.y=5;j.scale.y=0;var E=new PIXI.Text("酸素消費量 : "+100*h+"%/日",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:15});E.anchor.x=1;E.x=0;E.y=400;z.addChild(A);z.addChild(W);z.addChild(j);z.addChild(E);var R=new PIXI.Container;R.x=600;R.y=100;t.stage.addChild(R);var G=new PIXI.Sprite(n.get("label_box"));G.scale.x=G.scale.y=.8;R.addChild(G);var Y=new Array;for(var B=0;B<3;B++){var H=new PIXI.Container;H.y=80+120*B,H.box=new PIXI.Sprite(n.get("box")),H.addChild(H.box),Y.push(H),H.box.limit=15,H.level=B+1,H.orderList=new Array,H.box.limitLabel=new PIXI.Text("あと"+H.box.limit+"日",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:15}),k.anchor.x=1,H.box.limitLabel.x=35,H.box.limitLabel.y=75,H.addChild(H.box.limitLabel),R.addChild(H)}var N=new PIXI.Text("",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:60});var U=new PIXI.Text("",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:60});Array.prototype.forEach.call(Y,function(e){ae(e,!0)});ne(1);ne();ne();ne();ne();ne();ne();ne(1);var $=(new PIXI.Graphics).beginFill(0).drawRect(0,0,800,600).endFill();$.alpha=.95;$.interactive=!0;$.zIndex=1e5;t.stage.addChild($);var q=new PIXI.Sprite(n.get("startbutton"));q.anchor.set(.5);q.zIndex=100001;q.interactive=!0;q.buttonMode=!0;q.x=400;q.y=300;t.stage.addChild(q);$.on("pointertap",D);q.on("pointertap",D);function D(){var e=PIXI.Ticker.shared;e.add(function(){}),$.destroy(),q.destroy(),g=setInterval(function(){!function(){++x%2==0&&function(){var e=te(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);X.scale.y=0,X.x=Math.floor(440*Math.random()+20),X.y=Math.floor(390*Math.random()+20),X.tween=TweenMax.to(X,.3,{pixi:{scaleY:1},ease:Power1.easeInOut,repeat:1,yoyo:!0,onComplete:function(){X.tween=null}}),e.x=X.x+20,e.y=X.y,e.rotation=-Math.PI/2,e.scale.x=e.scale.y=0,TweenMax.to(e,.5,{pixi:{scaleX:1,scaleY:1,x:e.x+10},ease:Power1.easeInOut,onComplete:function(){e.rotation=0,TweenMax.to(e,.5,{pixi:{y:e.y+20},ease:Power1.easeInOut,onComplete:function(){J(e)}})}})}(v[Math.floor(Math.random()*(v.length-1))]);x%8==0&&function(){for(var e=a.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),n=a[e];a[e]=a[t],a[t]=n}for(var o=0;o<a.length;o++)o>=a.length/2?a[o].used=!1:a[o].used=!0;for(var r=0;r<a.length/2;r++){a[r].used=!0;var i=void 0;switch(a[r].type){case 0:ne(w[Math.floor(Math.random)*w.length]);break;case 1:null!=(i=Array.prototype.find.call(a,function(e){return 1==e.type&&0==e.used}))?(i.used=!0,ne(1)):ne(2);break;case 2:ne(Math.floor(Math.random()+3))}}}();Array.prototype.forEach.call(Y,function(e){var t=e.box;t.limit-=1,0==t.limit&&ae(e,!1),t.limitLabel.text="あと"+t.limit+"日"}),oe(),s++,_.text=s+"日経過",function(){h=0;for(var e=0;e<a.length;e++)switch(a[e].type){case 0:u-=6e-4,h+=6e-4;break;case 1:u+=.005,h-=.005;break;case 2:u-=.02,h+=.02;break;case 3:u+=0}u>1?u=1:u<0&&(u=0);j.scale.y=1-u,E.text="酸素消費量 : "+Math.round(1e4*h)/100+"%/日",0==u&&re(!1)}(),function(){var e=Array.prototype.filter.call(a,function(e){return 3==e.type});console.log(e);for(var t=Array.prototype.filter.call(a,function(e){return 3!=e.type}),n=0;n<2*e.length&&n<t.length-12*e.length;n++)ee(t[n])}()}()},1e3)}function J(e){a.push(e),e.interactive=!0,e.buttonMode=!0,e.tween=TweenMax.to(e,.5,{pixi:{scaleX:1.02,scaleY:1.05},ease:Power1.easeInOut,repeat:-1,yoyo:!0,onComplete:function(){e.rotation=0,TweenMax.to(e,.5,{pixi:{y:e.y+20},ease:Power1.easeInOut,onComplete:function(){J(e)}})}}),e.on("pointertap",K),e.on("pointerdown",Q)}function K(e){}function Q(e){var t=e.target;o=t,t.prev={x:t.x,y:t.y},t.on("pointermove",V),window.bindedFunc=Z,window.addEventListener("pointerup",window.bindedFunc)}function V(e){var a=o,r=e.data.getLocalPosition(P);a.x=r.x,a.y=r.y;var i=f=e.data.getLocalPosition(t.stage);80<i.x&&i.x<140&&540<i.y&&i.y<580?F.open||(F.open=!0,F.texture=n.get("dog_open")):F.open&&(F.open=!1,F.texture=n.get("dog_close"))}function Z(e){var a=o;a.removeAllListeners("pointermove"),null!=window.bindedFunc&&(window.removeEventListener("pointerup",window.bindedFunc),window.bindedFunc=null),o=null;var r=f;80<r.x&&r.x<140&&540<r.y&&r.y<580&&(ee(a),c-=p,p*=2,S.text="₫"+ie(p),F.open=!1,F.texture=n.get("dog_close"),oe()),Array.prototype.forEach.call(Y,function(e){var n=e.worldTransform.tx,o=e.worldTransform.ty;n<r.x&&r.x<n+120&&o<r.y&&r.y<o+70&&function(e,n){var a=Array.prototype.find.call(e.orderList,function(e){return e.type==n.type&&!e.filled});null!=a&&(ee(n),a.alpha=1,a.filled=!0,e.orderCount-=1);0==e.orderCount&&function(e){var n=0,a=1,o=0;Array.prototype.forEach.call(e.orderList,function(e){switch(o+=1,e.type){case 0:n+=1e4,a*=1.5;break;case 1:n+=2e4,a*=3;break;case 2:n+=1e5,a*=.9;break;case 3:n+=3e5,a*=1.5}});var r=n;o>1&&(r=Math.floor(r*a));c+=r;var i=new PIXI.Text("+₫"+ie(r),{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fill:16711680,fontSize:25});i.anchor.x=1,i.x=740,i.y=60,i.alpha=0,t.stage.addChild(i),TweenMax.to(i,.5,{pixi:{y:i.y-20,alpha:1},ease:Power1.easeInOut,onComplete:function(){oe(),TweenMax.to(i,.3,{pixi:{alpha:0},ease:Power1.easeInOut,onComplete:function(){i.destroy()}})}});e.x;var l=e.y;TweenMax.to(e,.5,{pixi:{y:-1e3},onComplete:function(){ae(e,!0),TweenMax.to(e,.5,{pixi:{y:l}})}})}(e)}(e,a)})}function ee(e){for(var t=0;t<a.length;t++)Object.is(a[t],e)&&a.splice(t,1);e.destroy()}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new PIXI.Sprite(n.get("type"+e));return P.addChild(t),t.anchor.x=.5,t.anchor.y=.5,t.type=e,t}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=te(e);t.x=Math.floor(455*Math.random()+20),t.y=Math.floor(415*Math.random()+20),t.scale.x=t.scale.y=0,TweenMax.to(t,.5,{pixi:{scaleX:1,scaleY:1},ease:Power1.easeInOut,onComplete:function(){J(t)}})}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Array.prototype.forEach.call(e.orderList,function(e){e.destroy()}),e.orderList=new Array;var n=e.x;e.y;t||TweenMax.to(e,.5,{pixi:{x:1e3},onComplete:function(){ae(e),TweenMax.to(e,.5,{pixi:{x:n}})}})}(e,t);for(var a=e.box,o=2*(e.level-1)+1,r=0;r<o;r++){var i=void 0;switch(e.level){case 1:i=Math.floor(2*(Math.random()-1e-5));break;default:i=I[Math.floor((Math.random()-1e-5)*I.length)]}var l=new PIXI.Sprite(n.get("type"+i));l.type=i,l.anchor.set(.5),l.scale.x=l.scale.y=.8,l.x=35+15*r,l.y=35,l.alpha=.5,l.rotation=-Math.PI/2,l.filled=!1,e.addChild(l),e.orderList.push(l),e.orderCount=o}a.limit=5+10*(e.level-1),a.limitLabel.text="あと"+a.limit+"日"}function oe(){var e;e=y-c<0?0:y-c,k.text="目標金額まで : ₫"+ie(e),e<=0&&re(!0)}function re(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=s+1;if(clearInterval(g),N.anchor.set(.5),N.x=400,N.y=100,N.zIndex=1e6,t.stage.addChild(N),(U=a?new PIXI.Text("",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fontSize:30}):new PIXI.Text("",{fontFamily:"游ゴシック,Osaka",fontWeight:"bold",fill:16777215,fontSize:30})).anchor.set(.5),U.x=400,U.y=250,U.zIndex=1e6,t.stage.addChild(U),a){N.text="ゲームクリア！",U.text="左遷から "+(s+1)+" 日後に地球へ帰還した。\r\nこれからもお仕事頑張ろう！";var r=(new PIXI.Graphics).beginFill(16777215).drawRect(0,0,800,600).endFill();r.alpha=.6,r.interactive=!0,r.zIndex=5e4,t.stage.addChild(r)}else{N.text="ゲームオーバー...",U.text="左遷から "+o+" 日目に酸欠で倒れた。\r\n退職してうきうきニート生活！";var i=(new PIXI.Graphics).beginFill(0).drawRect(0,0,800,600).endFill();i.alpha=.6,i.interactive=!0,i.zIndex=1e5,t.stage.addChild(i)}var l=new PIXI.Sprite(n.get("restartbutton"));l.anchor.set(.5),l.zIndex=100001,l.interactive=!0,l.buttonMode=!0,l.x=300,l.y=400,t.stage.addChild(l),l.on("pointertap",e);var d=new PIXI.Sprite(n.get("tweetbutton"));d.anchor.set(.5),d.zIndex=100001,d.interactive=!0,d.buttonMode=!0,d.x=500,d.y=400,t.stage.addChild(d),d.on("pointertap",le)}function ie(e){return String(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function le(e,t){window.open().location.href="https://twitter.com/share?url="+e+"&text="+encodeURIComponent(U.text.replace("\r\n","")+" #ahoge")+"&count=none&lang=ja"}}()}]);
//# sourceMappingURL=bundle.js.map